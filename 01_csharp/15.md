<h1>Interfaces</h1>

Como vimos no conte√∫do sobre  Heran√ßa, C# permite a cria√ß√£o de uma Classe herdando as caracter√≠sticas de outra Classe, chamada Superclasse, com objetivo de simplificar o processo de desenvolvimento atrav√©s da reutiliza√ß√£o de c√≥digo.

Entretanto, a linguagem C# n√£o permite que uma classe seja derivada de duas ou mais classes (Polimorfismo), como no exemplo demonstrado na figura abaixo, ou seja, C# n√£o permite a utiliza√ß√£o do conceito de **Heran√ßa M√∫ltipla**.

```mermaid
classDiagram
class Automovel {
+ anda() 
}
class Barco {
+ navega() 
}
class Anfibio {
 
}

Automovel <|-- Anfibio
Barco <|-- Anfibio
```

> ‚Ä¢**Heran√ßa Simples** √© o princ√≠pio, implementado em todas as linguagens de programa√ß√£o orientadas a objetos, que possibilita o compartilhamento de atributos e opera√ß√µes de apenas uma classe em uma subclasse. 
>
> ‚Ä¢**Heran√ßa M√∫ltipla** √© o princ√≠pio, implementado em algumas linguagens de programa√ß√£o orientadas a objetos, como a liguagem C++ por exemplo, que possibilita o compartilhamento de atributos e opera√ß√µes de duas ou mais classes em uma subclasse, ou seja, uma classe pode ter mais de um superclasse.

Para contornar este fato, a Linguagem C# oferece uma solu√ß√£o elegante para este fim: o conceito de **Interfaces**, onde um Objeto "implementa" as caracter√≠sticas de outro Objeto.

```mermaid
classDiagram
class Automovel {
+ anda() 
}
class VeiculoAquatico {
<< Interface >>
+ navega() 
}
class Anfibio {
 
}

Automovel <|-- Anfibio
VeiculoAquatico <-- Anfibio : Implementa
```

**Interface** √© uma estrutura que representa uma **Classe abstrata "pura"** em C#, que **n√£o possui atributos de dados** (exceto membros est√°ticos abstratos `static abstract` e virtuais `static virtual`), **n√£o possui M√©todos  Construtores**, **todos os M√©todos declarados s√£o abstratos** e **n√£o √© declarada como uma Classe** `class`, e **sim como uma Interface** `interface`.

Uma Classe pode implementar v√°rias Interfaces, entretanto n√£o √© recomend√°vel implementar muitas Interfaces, porqu√™ pode criar uma complexidade desnecess√°ria ao projeto.

A Interface estabelece **um conjunto de M√©todos, que s√£o apenas assinados, ou seja, sem o corpo do M√©todo, que obrigatoriamente devem ser implementados nas Classes que implementam a Interface**. Abaixo vemos a sintaxe de como criar uma Interface:

**Sintaxe - Criar Interface:**

```c#
public interface Inome_da_interface {
    // Corpo da Interface
}
```

Observe que **obrigatoriamente o nome da Interface deve ser iniciado pela letra I (Mai√∫scula)**, para indicar que se trata de uma Interface.

No trecho de c√≥digo abaixo, vemos a sintaxe de como implementar uma Interface em uma Classe. Observe que da mesma forma que na Heran√ßa, as Classes tamb√©m utilizam os **dois pontos (:)** na sua assinatura para indicar as Interfaces que ser√£o implementadas. Para diferenciar a Classe Herdada (Heran√ßa), das Interfaces Implementadas, utiliza-se a letra letra **I (Mai√∫scula)** no nome da Interface para diferenciar, embora por infer√™ncia o C# possui a capacidade de identificar automaticamente.

**Sintaxe - Implementar Interface:**

```c#
[modificador de Acesso] [modificador Non Access] class nome_da_classe : Inome_da_interface {
    // Implementa√ß√£o da Classe
}
```

<br />

Vamos analisar o exemplo abaixo, que apresenta o uso de Interfaces para resolver uma quest√£o de Heran√ßa M√∫ltipla:

<div align="center"><img src="https://i.imgur.com/kC6TY2u.png" title="source: imgur.com" /></div>

Observe na imagem acima que as Classes **Corredor, Nadador e Ciclista** estendem (herdam) a Super Classe **Atleta**. Na sequ√™ncia, vamos acrescentar a **Classe Triatleta**.

<div align="center"><img src="https://i.imgur.com/qXuhfKj.png" title="source: imgur.com" /></div>

Na imagem acima, vemos que a Classe **Triatleta** foi implementada como heran√ßa das Classes: **Corredor, Nadador e Ciclista**.

Teoricamente isto funcionaria, mas na pr√°tica n√£o, pois a Linguagem C# **N√ÉO ACEITA HERAN√áA M√öLTIPLA**. Para resolvermos esta quest√£o, ter√≠amos que implementar o conceito de **Interfaces**, onde **Atleta, Nadador, Corredor e Ciclista**, seriam convertidas em **Interfaces**, enquanto **Pessoa e Triatleta** seriam implementadas como Classes, como mostra a imagem abaixo:

<div align="center"><img src="https://i.imgur.com/a0gsk7E.png" title="source: imgur.com" /></div>

<br />

As **Interfaces Nadador, Corredor e Ciclista** ser√£o implementadas Herdando a Interface Atleta. A **Classe Triatleta ir√° implementar as 3 Interfaces e Herdar√° a Classe Pessoa**. Por consequ√™ncia, Triatleta tamb√©m herdar√° Atleta.

Abaixo, vemos o Diagrama de Classes do exemplo acima:

<img src="https://i.imgur.com/vGDOChv.png" title="source: imgur.com" width="3%"/>**Exemplo 01 - Diagrama de Classes** 

```mermaid
classDiagram
class Pessoa {
- nome: string
+ String getNome()
+ void setNome(String nome)
}
class Triatleta {
+ void correr()
+ void pedalar()
+ void nadar()
}
class IAtleta {
<< Interface >>
+ void Aquecer()
}
class ICiclista {
<< Interface >>
+ void Pedalar()
}
class ICorredor {
<< Interface >>
+ void Correr()
}
class INadador {
<< Interface >>
+ void Nadar()
}
Pessoa <|-- Triatleta: << extends >>
IAtleta <|-- ICiclista: << extends >>
IAtleta <|-- ICorredor: << extends >>
IAtleta <|-- INadador: << extends >>
ICiclista <-- Triatleta: << implements >>
ICorredor <-- Triatleta: << implements >>
INadador <-- Triatleta: << implements >>
```

<br />

<div align="left"><img src="https://i.imgur.com/DNV9Rxu.png" title="source: imgur.com" width="30px"/> <a href="https://learn.microsoft.com/pt-br/dotnet/csharp/language-reference/keywords/interface" target="_blank"><b>Documenta√ß√£o: Interface</b></a></div>

<br />

<img src="https://i.imgur.com/bm8Jxxm.png" title="source: imgur.com" width="4%"/>**Exemplo 01 - Implementa√ß√£o em C#:** 

**Classe Pessoa**

```c#
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace interface_01
{
    public class Pessoa
    {
        private string nome;

        public Pessoa(string nome)
        {
            this.nome = nome;
        }

        public string GetNome()
        {
            return nome;
        }

        public void SetNome(string nome)
        {
            this.nome = nome;
        }

        public void Cansou()
        {
            Console.WriteLine("\nCansou...");
        }
    }
}
```

A Classe Pessoa (Superclasse), foi criada com apenas um Atributo (nome), conforme o Diagrama de Classes acima. Tamb√©m foi criado o M√©todo Construtor, os M√©todos Get e Set do Atributo e o M√©todo Cansou().

**Interface IAtleta**


```c#
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace interface_01
{
    public interface IAtleta
    {
        public void Aquecer();
    }
}
```

A Interface IAtleta foi criada com apenas um M√©todo (Aquecer()), conforme o Diagrama de Classes acima. 

**Interface ICiclista**


```c#
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace interface_01
{
    public interface ICiclista : IAtleta
    {
        public void Pedalar();
    }
}
```

A Interface ICiclista foi criada como uma Heran√ßa da Classe Atleta, com apenas um M√©todo (Pedalar()), conforme o Diagrama de Classes acima. 

**Interface ICorredor**


```c#
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace interface_01
{
    public interface ICorredor : IAtleta
    {
        public void Correr();
    }
}
```

A Interface ICorredor foi criada como uma Heran√ßa da Classe Atleta, com apenas um M√©todo (Correr()), conforme o Diagrama de Classes acima. 

**Interface INadador**


```c#
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace interface_01
{
    public interface INadador: IAtleta
    {
        public void Nadar();
    }
}
```

A Interface INadador foi criada como uma Heran√ßa da Classe Atleta, com apenas um M√©todo (Nadar()), conforme o Diagrama de Classes acima. 

**Classe Triatleta**


```c#
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace interface_01
{
    public class Triatleta : Pessoa, ICiclista, ICorredor, INadador
    {
        public Triatleta(string nome) : base(nome)
        {
        }

        public void Aquecer()
        {
            Console.WriteLine("Aquecendo...");
        }

        public void Correr()
        {
            Console.WriteLine("Correndo...");
        }

        public void Nadar()
        {
            Console.WriteLine("Nadando...");
        }

        public void Pedalar()
        {
            Console.WriteLine("Pedalando...");
        }
    }
}
```

A Classe Triatleta foi criada como Heran√ßa da Classe Pessoa e Implementa as Interfaces: Atleta (por heran√ßa), Nadador, Corredor e Ciclista, conforme o Diagrama de Classes acima. Al√©m disso, tamb√©m foi criado o M√©todo Construtor. 

Observe que todos os M√©todos das 4 Interfaces foram implementados. Quando uma Classe Implementa uma Interface, ela "assina um contrato" com a Interface, que a obriga a implementar ou minimamente inserir as assinaturas de todos os M√©todos da Interface no Corpo da Classe, mesmo sem a implementa√ß√£o.

**Classe Program**

```java
package meios_transporte;

public class TestaTriatleta {

    public static void main(String[] args) {

        Triatleta triatleta = new Triatleta("Kelvyn");
        
        triatleta.aquecer();
        triatleta.nadar();
        triatleta.pedalar();
        triatleta.correr();
        triatleta.cansou();

    }

}
```

Na Classe Program, foi instanciado um Objeto da Classe Triatleta. Observe que gra√ßas a Heran√ßa e as Interfaces implementadas, o Objeto da Classe Triatleta consegue executar os M√©todos das 4 Interfaces e da Classe Pessoa. Abaixo, voc√™ confere o resultado do c√≥digo no Console:

<img src="https://i.imgur.com/V2ReOnx.png" title="source: imgur.com" width="3%"/>**Resultado do Algoritmo:**

```
Aquecendo...

Nadando...

Pedalando...

Correndo...

Cansou...
```

<br />

<h2>2. Interfaces x Classes Abstratas</h2>

| **Interface**                                                | **Classe Abstrata**                                          |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| Uma classe pode implementar diversas     Interfaces.         | Uma Classe pode Herdar somente uma Classe, seja ela  Abstrata ou n√£o. |
| Define novas interfaces atrav√©s de heran√ßa (m√∫ltipla) de **assinaturas.** | Define novas classes atrav√©s de heran√ßa (simples) de c√≥digo. |
| Uma Interface n√£o pode conter qualquer tipo de c√≥digo, muito menos c√≥digo padr√£o. | Uma Classe Abstrata pode fornecer c√≥digo completo, c√≥digo padr√£o ou ter apenas a declara√ß√£o de sua estrutura para ser posteriormente sobrescrita. |
| Suporte somente constantes do tipo est√°tica abstrata ou virtual. | Pode conter constantes est√°ticas e de inst√¢ncia (atributos). |
| Se todas as implementa√ß√µes da Interface compartilham a mesma assinatura do m√©todo, ent√£o a interface √© a melhor op√ß√£o. | Se as v√°rias implementa√ß√µes s√£o todas do tipo da Classe e compartilham um comportamento comum, ent√£o a classe abstrata √© a melhor op√ß√£o. |

<br />

<h2>3. Regras para usar Interface</h2>

Aqui est√£o alguns pontos-chave para definir uma interface em C# que devem ser mantidos em mente. As regras s√£o as seguintes:

1. Uma interface n√£o pode ser instanciada diretamente como uma Classe, ela deve ser implementada em uma Classe Concreta.

2. Uma interface n√£o pode ser declarada com o modificador **sealed**. Lembre-se que o modificador sealed indica que uma Classe n√£o poder instanciada, logo uma Interface sealed n√£o faria sentido.

3. Uma classe que implementa uma interface deve fornecer suas pr√≥prias implementa√ß√µes de todos os m√©todos definidos na interface.

4. N√£o implemente uma Interface caso um ou mais M√©todos da Interface n√£o ser√£o implementados, ou seja, corpo vazio. Analise e refatore o c√≥digo em outras Interfaces menores.

5. N√£o podemos reduzir a visibilidade de um m√©todo da interface durante a substitui√ß√£o, ou seja, quando implementamos um m√©todo da interface, ele obrigatoriamente deve ser declarado como **public** (p√∫blico).

6. Um M√©todo da interface tamb√©m pode ser implementado em uma Classe com o corpo vazio, embora n√£o seja uma pr√°tica recomendada. 

7. Uma Interface de n√≠vel superior pode ser declarada como public (p√∫blica) ou padr√£o (internal), embora seja recomendado o uso do modificador **public**. 

8. Todos os m√©todos definidos em uma interface s√£o abstratos e p√∫blicos por defini√ß√£o. 

9. Se voc√™ adicionar qualquer novo m√©todo na Interface, todas as Classes Concretas que implementam essa Interface devem fornecer implementa√ß√µes para o m√©todo rec√©m-adicionado, porque todos os m√©todos na Interface s√£o abstratos por defini√ß√£o. Lembre-se que uma Interface √© um contrato, que lhe obriga a implementar todos os M√©todos em uma Classe que implementa a Interface.

<br />

<div align="left"><img src="https://i.imgur.com/JACNZiR.png" title="source: imgur.com" width="5%"/> <a href="https://github.com/rafaelq80/exemplos_csharp/tree/main/15_interface/interface_01" target="_blank"><b>C√≥digo Fonte dos Exemplos</b></a></div>

<br />

------

## üîë**Pontos chave:**

1.  **Interface** √© uma estrutura que representa uma **Classe abstrata "pura"** em C#, que **n√£o possui atributos de dados** (exceto membros est√°ticos abstratos `static abstract` e virtuais `static virtual`), **n√£o possui M√©todos  Construtores**, **todos os M√©todos declarados s√£o abstratos** e **n√£o √© declarada como uma Classe** `class`, e **sim como uma Interface** `interface`.
2. Uma Classe pode implementar v√°rias Interfaces, entretanto n√£o √© recomend√°vel implementar muitas Interfaces, porqu√™ pode criar uma complexidade desnecess√°ria ao projeto.
3. A Interface estabelece **um conjunto de M√©todos apenas assinados, ou seja, sem o corpo, que obrigatoriamente devem ser implementados nas Subclasses que implementa a Interface**.

<br /><br />

<div align="left"><a href="README.md"><img src="https://i.imgur.com/XMgF3gl.png" title="source: imgur.com" width="3%"/>Voltar</a></div>
